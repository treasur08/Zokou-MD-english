const a64_0x26f476=a64_0x2e79;(function(_0x207f88,_0x2c5efd){const _0x3d7503=a64_0x2e79,_0x428a94=_0x207f88();while(!![]){try{const _0x494ba7=parseInt(_0x3d7503(0x1ab))/0x1+parseInt(_0x3d7503(0x18e))/0x2*(parseInt(_0x3d7503(0x196))/0x3)+parseInt(_0x3d7503(0x1ac))/0x4+-parseInt(_0x3d7503(0x180))/0x5+parseInt(_0x3d7503(0x1a9))/0x6*(parseInt(_0x3d7503(0x18b))/0x7)+parseInt(_0x3d7503(0x1b7))/0x8*(parseInt(_0x3d7503(0x194))/0x9)+-parseInt(_0x3d7503(0x18f))/0xa*(parseInt(_0x3d7503(0x184))/0xb);if(_0x494ba7===_0x2c5efd)break;else _0x428a94['push'](_0x428a94['shift']());}catch(_0x55a396){_0x428a94['push'](_0x428a94['shift']());}}}(a64_0x47e8,0x5f8a4));const a64_0x1dd7b1=(function(){let _0x1ca946=!![];return function(_0x5c721f,_0x3e16d7){const _0x33ffe2=_0x1ca946?function(){const _0x3be978=a64_0x2e79;if(_0x3e16d7){const _0x1e9673=_0x3e16d7[_0x3be978(0x195)](_0x5c721f,arguments);return _0x3e16d7=null,_0x1e9673;}}:function(){};return _0x1ca946=![],_0x33ffe2;};}()),a64_0x588748=a64_0x1dd7b1(this,function(){const _0x39b38d=a64_0x2e79,_0x263ec0={'nmrvZ':'(((.+)+)+)+$'};return a64_0x588748['toString']()[_0x39b38d(0x19f)](_0x263ec0['nmrvZ'])[_0x39b38d(0x1a0)]()['constructor'](a64_0x588748)[_0x39b38d(0x19f)](_0x39b38d(0x1a5));});a64_0x588748();function a64_0x2e79(_0x33e729,_0x1c194a){const _0x5b9eb2=a64_0x47e8();return a64_0x2e79=function(_0x588748,_0x1dd7b1){_0x588748=_0x588748-0x17a;let _0x47e88d=_0x5b9eb2[_0x588748];if(a64_0x2e79['NzJjkb']===undefined){var _0x2e79a1=function(_0xfcb72){const _0x55f2bc='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5a05f9='',_0x4ff8de='',_0x1f010d=_0x5a05f9+_0x2e79a1;for(let _0x217d13=0x0,_0x1b173f,_0x432900,_0x964d86=0x0;_0x432900=_0xfcb72['charAt'](_0x964d86++);~_0x432900&&(_0x1b173f=_0x217d13%0x4?_0x1b173f*0x40+_0x432900:_0x432900,_0x217d13++%0x4)?_0x5a05f9+=_0x1f010d['charCodeAt'](_0x964d86+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1b173f>>(-0x2*_0x217d13&0x6)):_0x217d13:0x0){_0x432900=_0x55f2bc['indexOf'](_0x432900);}for(let _0x4302d1=0x0,_0x1258fc=_0x5a05f9['length'];_0x4302d1<_0x1258fc;_0x4302d1++){_0x4ff8de+='%'+('00'+_0x5a05f9['charCodeAt'](_0x4302d1)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4ff8de);};a64_0x2e79['TqdVyr']=_0x2e79a1,_0x33e729=arguments,a64_0x2e79['NzJjkb']=!![];}const _0x5e8296=_0x5b9eb2[0x0],_0x3aacb7=_0x588748+_0x5e8296,_0x211b16=_0x33e729[_0x3aacb7];if(!_0x211b16){const _0x214861=function(_0x97c67e){this['nXRZUF']=_0x97c67e,this['dKVLNE']=[0x1,0x0,0x0],this['ynkWPS']=function(){return'newState';},this['ymAvGu']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fqlTrO']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x214861['prototype']['VGZQRT']=function(){const _0x4fa4a1=new RegExp(this['ymAvGu']+this['fqlTrO']),_0x59ab01=_0x4fa4a1['test'](this['ynkWPS']['toString']())?--this['dKVLNE'][0x1]:--this['dKVLNE'][0x0];return this['kjgQUo'](_0x59ab01);},_0x214861['prototype']['kjgQUo']=function(_0x5addba){if(!Boolean(~_0x5addba))return _0x5addba;return this['gsRGmm'](this['nXRZUF']);},_0x214861['prototype']['gsRGmm']=function(_0x16ae95){for(let _0x12d162=0x0,_0x1f14dd=this['dKVLNE']['length'];_0x12d162<_0x1f14dd;_0x12d162++){this['dKVLNE']['push'](Math['round'](Math['random']())),_0x1f14dd=this['dKVLNE']['length'];}return _0x16ae95(this['dKVLNE'][0x0]);},new _0x214861(a64_0x2e79)['VGZQRT'](),_0x47e88d=a64_0x2e79['TqdVyr'](_0x47e88d),_0x33e729[_0x3aacb7]=_0x47e88d;}else _0x47e88d=_0x211b16;return _0x47e88d;},a64_0x2e79(_0x33e729,_0x1c194a);}function a64_0x47e8(){const _0x43b778=['oIb0BYbLBMfIBguGAxqk','ywn0Aw9U','C2vHCMnO','Dg9tDhjPBMC','Bg9N','icHQAwqSigfJDgLVBIKkicaGicaGicaGifzbtfvfuYaOpYWGpYKkicaGicaGicaGie9oienptKzmsunukgPPzcKGre8GvvbeqvrfifnfvcbHy3rPB24GpsbLEgnSDwrLzc5Hy3rPB247cIaGicaGicaG','cIaGicaGicaGq1jfqvrfifrbqKXfieLgie5pvcbfweLtvfmG','CNvU','kcGOlISPkYKRksSK','ifDirvjfigPPzca9id87','zxjYB3i','zxrHDa','ndG1odjWC1btu2O','zw5HyMXLzezVCKPPza','mJuWntK2BLPLENDb','mtu0odu4ngrRDgLcrW','sfnAExC','iIWkicaGicaGicaGigfJDgLVBIburvHuie5pvcbovuXmierfrKfvtfqGiG','s015yLm','z2vUzxjHDgvdBwq','uK9XAwy','AxneCMS','zgLZywjSzwq','B2zM','Aw5JBhvKzxm','z2v0','odu1mZy4CLrUBfbr','zw5HyMXLza','y0T2zfO','icGkicaGicaGicaGigPPzcburvHuifbssu1buLKGs0vzlaOGicaGicaGicaGzxrHDcburvHuie5pvcbovuXmierfrKfvtfqGiG','lI4VEM9RB3u','shP1v1y','igLZig5VDYa','DMfSDwvZ','nJuZmZe1swD2u2Pr','AM9PBG','C2v0','oIb0BYbJAgfUz2uGDgHLigfJDgLVBIb0BYa','odyYmJq2refXvgDQ','D2fYBG','vgHLigfJDgLVBIbMB3iG','DhjPBq','rxjYB3iGC2v0DgLUzYa','ywn0Aw9UlW','qunusu9ouW','ndm0y2PlsK9J','u0vmrunuigfJDgLVBIbguK9nia','oIb0BYbLBMfIBguGyw5KihnLDcb0AguGywn0Aw9UihrVihjLBw92zq','mJmZodbvzgDXDuW','mtCWwMvuufzw','zgvSzxrL','CMvTB3zL','lI4VlI4VyMrKl19PBMrLEa','igfJDgLVBI8','ouH4rwDruW','yxbWBhK','mtu2tKPJrKrW','C3bSAxq','z2v0qwn0Aw9UrM9YsMLK','vgHPCYbJB21Tyw5KigLZig9UBhKGyxzHAwXHyMXLigzVCIbNCM91Chm','u1rbvevt','iGOGicaGicaGicKkicaGicaG','AxfoDgO'];a64_0x47e8=function(){return _0x43b778;};return a64_0x47e8();}const NodeCache=require('node-cache'),initializeDb=require(a64_0x26f476(0x192)),{zokou}=require(a64_0x26f476(0x17c));class EventStateManager{#tableName;#db=initializeDb();[a64_0x26f476(0x19a)]={'enabled':'on','disabled':a64_0x26f476(0x1b4)};['ACTIONS']={'remove':a64_0x26f476(0x191),'delete':a64_0x26f476(0x190),'warn':a64_0x26f476(0x185)};#defaultAction=this[a64_0x26f476(0x18a)][a64_0x26f476(0x191)];#defaultState=this[a64_0x26f476(0x19a)][a64_0x26f476(0x1b3)];#cache;constructor(_0x56e0c1,_0x155e15=new NodeCache()){this.#tableName=_0x56e0c1,this.#cache=_0x155e15,this.#createTable();}#createTable(){const _0x56c203=a64_0x26f476;this.#db['prepare'](_0x56c203(0x1a3)+this.#tableName+_0x56c203(0x17b)+this.#defaultState+_0x56c203(0x1ae)+this.#defaultAction+_0x56c203(0x19b))[_0x56c203(0x1a4)]();}#addOrUpdateJid(_0x5e113c,_0x55872a=this.#defaultState){const _0x583c29=a64_0x26f476;this.#db['prepare']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+'\x20(jid,\x20etat)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20etat\x20=\x20excluded.etat;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['run'](_0x5e113c,_0x55872a);const _0x5575e8=this.#cache['get'](_0x5e113c)||{};this.#cache[_0x583c29(0x182)](_0x5e113c,{..._0x5575e8,'etat':_0x55872a});}#updateJidAction(_0x1bdc9c,_0x2d8d33=this.#defaultAction){const _0x432bdd=a64_0x26f476;try{this.#db['prepare']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+_0x432bdd(0x1a2))[_0x432bdd(0x1a4)](_0x1bdc9c,_0x2d8d33);const _0x19feec=this.#cache[_0x432bdd(0x1b6)](_0x1bdc9c)||{};this.#cache['set'](_0x1bdc9c,{..._0x19feec,'action':_0x2d8d33}),console['log']('Jid\x20'+_0x1bdc9c+'\x20updated\x20with\x20action\x20'+_0x2d8d33);}catch(_0x55ccec){console[_0x432bdd(0x1a7)]('Error\x20updating\x20jid\x20'+_0x1bdc9c+'\x20with\x20action\x20'+_0x2d8d33+':',_0x55ccec);throw _0x55ccec;}}['enabledForJid'](_0x4ca428){const _0x3f0988=a64_0x26f476,_0x3f98eb={'iqNtj':_0x3f0988(0x1af),'HzuWV':function(_0x48a7c2,_0x26878f){return _0x48a7c2!==_0x26878f;}};try{if(_0x3f0988(0x17a)!==_0x3f98eb[_0x3f0988(0x19c)]){const _0x3d8721=this.#cache[_0x3f0988(0x1b6)](_0x4ca428);if(_0x3f98eb[_0x3f0988(0x17d)](_0x3d8721?.[_0x3f0988(0x1a8)],undefined))return _0x3d8721[_0x3f0988(0x1a8)]!==this.#defaultState;const _0x4b0d16=this.#db['prepare']('SELECT\x20etat\x20FROM\x20'+this.#tableName+_0x3f0988(0x1a6))[_0x3f0988(0x1b6)](_0x4ca428);if(_0x4b0d16)return this.#cache[_0x3f0988(0x182)](_0x4ca428,{...this.#cache[_0x3f0988(0x1b6)](_0x4ca428)||{},'etat':_0x4b0d16['etat']}),_0x4b0d16[_0x3f0988(0x1a8)]!==this.#defaultState;return![];}else{_0x2a037b['error']('Error\x20getting\x20action\x20for\x20jid\x20'+_0x5592de+':',_0x56535c);throw _0x33edbe;}}catch(_0x592d98){return console['error']('Error\x20checking\x20enabled\x20state\x20for\x20jid\x20'+_0x4ca428+':',_0x592d98),![];}}[a64_0x26f476(0x198)](_0x49aefb){const _0x1da8b1=a64_0x26f476;try{const _0x27eba3=this.#cache['get'](_0x49aefb);if(_0x27eba3?.['action'])return _0x27eba3['action'];const _0x21484d=this.#db['prepare'](_0x1da8b1(0x18c)+this.#tableName+_0x1da8b1(0x1a6))['get'](_0x49aefb);if(_0x21484d)return this.#cache['set'](_0x49aefb,{...this.#cache[_0x1da8b1(0x1b6)](_0x49aefb)||{},'action':_0x21484d[_0x1da8b1(0x19e)]}),_0x21484d[_0x1da8b1(0x19e)];return this.#defaultAction;}catch(_0x33022b){console[_0x1da8b1(0x1a7)]('Error\x20getting\x20action\x20for\x20jid\x20'+_0x49aefb+':',_0x33022b);throw _0x33022b;}}[a64_0x26f476(0x1b0)](_0x29164b){const _0x16157a=a64_0x26f476,_0x79177c={'isDrk':function(_0x27a336,_0x11ee12){return _0x27a336(_0x11ee12);},'HSZyw':'You\x20do\x20not\x20have\x20the\x20necessary\x20permissions','wAfJd':function(_0x2e302a,_0x3243db){return _0x2e302a==_0x3243db;},'KoOwB':function(_0x5d5a31,_0x21981d){return _0x5d5a31(_0x21981d);},'ROqif':function(_0x370ddd,_0x2d7417,_0x13e621){return _0x370ddd(_0x2d7417,_0x13e621);}},{nomCom:_0x523160,categorie:_0x21f06a,desc:_0x2830d6,alias:_0x3fcbac,reaction:_0x3a9ee5}=_0x29164b;_0x79177c[_0x16157a(0x1b1)](zokou,{'nomCom':_0x523160,'categorie':_0x21f06a,'reaction':_0x3a9ee5,'desc':_0x2830d6,'alias':_0x3fcbac},async(_0x5f4f06,_0xfa4ae4,_0xa54899)=>{const _0x1b9836=_0x16157a,{verifGroupe:_0x490539,verifAdmin:_0x3ca649,ms:_0x25ca7f,arg:_0x3cb666,superUser:_0x233bf5,repondre:_0x3b3fea}=_0xa54899;if(!_0x490539)return _0x79177c[_0x1b9836(0x1b2)](_0x3b3fea,_0x1b9836(0x199));if(!_0x233bf5&&!_0x3ca649)return _0x79177c[_0x1b9836(0x1b2)](_0x3b3fea,_0x79177c[_0x1b9836(0x1ad)]);try{const _0xada3ac='\x0a'+_0x523160+'\x20'+this[_0x1b9836(0x19a)][_0x1b9836(0x1b8)]+_0x1b9836(0x19d)+_0x523160+'\x20'+this[_0x1b9836(0x19a)]['disabled']+':\x20to\x20disable\x20it\x0a'+_0x523160+_0x1b9836(0x193)+this[_0x1b9836(0x18a)]['remove']+':\x20to\x20change\x20the\x20action\x20to\x20'+this['ACTIONS']['remove']+'\x0a'+_0x523160+_0x1b9836(0x193)+this['ACTIONS']['delete']+_0x1b9836(0x183)+this[_0x1b9836(0x18a)]['delete']+'\x0a'+_0x523160+_0x1b9836(0x193)+this['ACTIONS']['warn']+_0x1b9836(0x183)+this['ACTIONS']['warn']+'\x0a'+_0x523160+'\x20'+this[_0x1b9836(0x18a)]['remove']+'\x20'+this['STATES']['enabled']+_0x1b9836(0x18d);if(!_0x3cb666||!_0x3cb666[0x0]||_0x3cb666[_0x1b9836(0x181)]('')[_0x1b9836(0x187)]()=='')return _0x79177c[_0x1b9836(0x1b2)](_0x3b3fea,_0xada3ac);const _0x1c6602=_0x3cb666[0x0]['toLowerCase']();if(_0x79177c['wAfJd'](_0x1c6602,this[_0x1b9836(0x19a)][_0x1b9836(0x1b8)])){if(this[_0x1b9836(0x1aa)](_0x5f4f06))return _0x3b3fea(_0x523160+'\x20is\x20already\x20enabled');return this.#addOrUpdateJid(_0x5f4f06,_0x1c6602),_0x3b3fea(_0x523160+'\x20is\x20now\x20enabled');}else{if(_0x1c6602==this[_0x1b9836(0x19a)][_0x1b9836(0x1b3)]){if(!this['enabledForJid'](_0x5f4f06))return _0x3b3fea(_0x523160+'\x20is\x20already\x20disabled');return this.#addOrUpdateJid(_0x5f4f06,_0x1c6602),_0x3b3fea(_0x523160+'\x20is\x20now\x20disabled');}else{if(_0x1c6602['startsWith'](_0x1b9836(0x189))){const _0x3c3f3f=_0x1c6602[_0x1b9836(0x197)]('/')[0x1][_0x1b9836(0x187)]()['toLowerCase']();if(!Object[_0x1b9836(0x17f)](this['ACTIONS'])[_0x1b9836(0x1b5)](_0x3c3f3f))return _0x3b3fea('The\x20action\x20'+_0x3c3f3f+'\x20is\x20not\x20valid.\x20Valid\x20actions\x20are:\x20'+Object['values'](this['ACTIONS'])['join'](',\x20'));return this.#updateJidAction(_0x5f4f06,_0x3c3f3f),_0x79177c['KoOwB'](_0x3b3fea,_0x1b9836(0x186)+_0x523160+_0x1b9836(0x17e)+_0x3c3f3f);}else{if('lOhAk'==='lOhAk')return _0x3b3fea(_0xada3ac);else{const _0x2530b3=_0x4302d1?function(){const _0x2d5b26=_0x1b9836;if(_0x5addba){const _0x43b0b4=_0x260ff1[_0x2d5b26(0x195)](_0x598f1b,arguments);return _0x303d61=null,_0x43b0b4;}}:function(){};return _0x59ab01=![],_0x2530b3;}}}}}catch(_0x5e72a4){return console[_0x1b9836(0x1a1)](_0x1b9836(0x188)+_0x523160+'\x20for\x20jid\x20'+_0x5f4f06+':\x20'+_0x5e72a4),_0x3b3fea('An\x20error\x20occurred,\x20please\x20let\x20us\x20know\x20on\x20the\x20forum\x20if\x20persistent');}});}}module['exports']=EventStateManager;