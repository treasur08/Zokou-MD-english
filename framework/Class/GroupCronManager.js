const a65_0x504d41=a65_0x571e;(function(_0x5f4e45,_0x83025d){const _0x3a898e=a65_0x571e,_0x379620=_0x5f4e45();while(!![]){try{const _0x1dd286=parseInt(_0x3a898e(0x1c1))/0x1*(-parseInt(_0x3a898e(0x1b0))/0x2)+-parseInt(_0x3a898e(0x1d6))/0x3+-parseInt(_0x3a898e(0x1ce))/0x4*(parseInt(_0x3a898e(0x1ba))/0x5)+parseInt(_0x3a898e(0x1cc))/0x6*(parseInt(_0x3a898e(0x1c5))/0x7)+-parseInt(_0x3a898e(0x1bb))/0x8*(-parseInt(_0x3a898e(0x1a7))/0x9)+parseInt(_0x3a898e(0x1ad))/0xa*(parseInt(_0x3a898e(0x1a6))/0xb)+parseInt(_0x3a898e(0x1c0))/0xc*(parseInt(_0x3a898e(0x1d3))/0xd);if(_0x1dd286===_0x83025d)break;else _0x379620['push'](_0x379620['shift']());}catch(_0x4b9f73){_0x379620['push'](_0x379620['shift']());}}}(a65_0x5257,0x9c336));const a65_0x1f4c6a=(function(){let _0x2c4c48=!![];return function(_0x2ac2e4,_0x3f1b66){const _0x2ac830=_0x2c4c48?function(){if(_0x3f1b66){const _0xe68b2e=_0x3f1b66['apply'](_0x2ac2e4,arguments);return _0x3f1b66=null,_0xe68b2e;}}:function(){};return _0x2c4c48=![],_0x2ac830;};}()),a65_0x272a15=a65_0x1f4c6a(this,function(){const _0x39cc74=a65_0x571e;return a65_0x272a15['toString']()[_0x39cc74(0x1b6)](_0x39cc74(0x1c3))['toString']()[_0x39cc74(0x1c7)](a65_0x272a15)['search'](_0x39cc74(0x1c3));});a65_0x272a15();function a65_0x571e(_0x475578,_0x4b9bdb){const _0x46b528=a65_0x5257();return a65_0x571e=function(_0x272a15,_0x1f4c6a){_0x272a15=_0x272a15-0x1a0;let _0x525766=_0x46b528[_0x272a15];if(a65_0x571e['bFOlHZ']===undefined){var _0x571ece=function(_0x34505a){const _0x279a0f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x73df3e='',_0x2569bc='',_0x1aed92=_0x73df3e+_0x571ece;for(let _0x66ac43=0x0,_0x2da48b,_0x22c54f,_0x21bf93=0x0;_0x22c54f=_0x34505a['charAt'](_0x21bf93++);~_0x22c54f&&(_0x2da48b=_0x66ac43%0x4?_0x2da48b*0x40+_0x22c54f:_0x22c54f,_0x66ac43++%0x4)?_0x73df3e+=_0x1aed92['charCodeAt'](_0x21bf93+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2da48b>>(-0x2*_0x66ac43&0x6)):_0x66ac43:0x0){_0x22c54f=_0x279a0f['indexOf'](_0x22c54f);}for(let _0x20df7b=0x0,_0x4d00d7=_0x73df3e['length'];_0x20df7b<_0x4d00d7;_0x20df7b++){_0x2569bc+='%'+('00'+_0x73df3e['charCodeAt'](_0x20df7b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2569bc);};a65_0x571e['ZykuFc']=_0x571ece,_0x475578=arguments,a65_0x571e['bFOlHZ']=!![];}const _0x462b56=_0x46b528[0x0],_0x1d081c=_0x272a15+_0x462b56,_0x5334b4=_0x475578[_0x1d081c];if(!_0x5334b4){const _0x55ba99=function(_0x3d3278){this['MBXYpx']=_0x3d3278,this['JtqIoH']=[0x1,0x0,0x0],this['TaAWbe']=function(){return'newState';},this['FtkZdV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['wnbUHR']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x55ba99['prototype']['xrkdZi']=function(){const _0x42ceb7=new RegExp(this['FtkZdV']+this['wnbUHR']),_0x3391ab=_0x42ceb7['test'](this['TaAWbe']['toString']())?--this['JtqIoH'][0x1]:--this['JtqIoH'][0x0];return this['YEupgz'](_0x3391ab);},_0x55ba99['prototype']['YEupgz']=function(_0x5f03ef){if(!Boolean(~_0x5f03ef))return _0x5f03ef;return this['NSejoS'](this['MBXYpx']);},_0x55ba99['prototype']['NSejoS']=function(_0x136e92){for(let _0x41fcc7=0x0,_0x4d8703=this['JtqIoH']['length'];_0x41fcc7<_0x4d8703;_0x41fcc7++){this['JtqIoH']['push'](Math['round'](Math['random']())),_0x4d8703=this['JtqIoH']['length'];}return _0x136e92(this['JtqIoH'][0x0]);},new _0x55ba99(a65_0x571e)['xrkdZi'](),_0x525766=a65_0x571e['ZykuFc'](_0x525766),_0x475578[_0x1d081c]=_0x525766;}else _0x525766=_0x5334b4;return _0x525766;},a65_0x571e(_0x475578,_0x4b9bdb);}function a65_0x5257(){const _0x582ff9=['vw5bDxrVCMLZzwq','nZDewwHLCfK','mtaYnJC3nJDqDLLfB3O','yxbWBhK','q1PutLe','zMfSs0y','Aw5PDgLHDgvdCM9U','s0T4uvG','mtyWoteWCKv0C09h','rvbfyNK','CxHAzK0','nda1mZeYv2H1rNLZ','yM90swq','yw5UB3vUy2vTzw50','veLnrv9At05f','ChvZAa','C3bSAxq','C2vHCMnO','Aw5PDgLHBgLZzunYB25Zt25tDgfYDa','C2vUze1LC3nHz2u','lI4VlI4VC2v0','mtq1rfLLz3H3','ogLXAKLVtq','icOGkIaQ','v05VDM4','DhjPBq','z3jVDxbjza','mtjYCxLqD0u','m3vHCe9NDW','CgfYC2viCK1PBG','kcGOlISPkYKRksSK','vgLJAYb0B2nRlcb0AguGzxHJAxrPBMCGzgLZy3vZC2LVBNmGyxjLignVBwLUzYb0BYbHBIbLBMqUifDLihrOyw5RihLVDsbMB3iGEw91CIbHy3rPDMuGCgfYDgLJAxbHDgLVBJSGBM93igL0j3mGDgLTzsb0BYbJBg9Zzsb0AguGz3jVDxaGzM9YihrVzgf5lG','ndKWEMTfq0jr','tM8Gy3jVBIbOyxmGyMvLBIbHy3rPDMf0zwqGzM9YihrOAxmGDgLTzq','y29UC3rYDwn0B3i','Bxv0zq','CxPPAvy','qw9vsKm','C2nOzwr1Bgu','nJK1nffWvKPsBW','BM9Kzs1JCM9U','mti4ndq0tK9UBLDU','z3jVDxbtzxr0Aw5NvxbKyxrL','C3rHCNrZv2L0Aa','Dw5TDxrL','C3vIC3rYAw5N','mJyWotG4otfnvg1AsfC','wxrwCM4','Bg9N','mZq4otC1nK9oCgDTEa','zxHWB3j0CW','CMvTB3zLq3jVBG','w0fvve9vtK1vveuTrvjst1jDidO','zMLUza','zM9YrwfJAa','sxqNCYb0Aw1LihrVig9Wzw4GDgHLigrVB3jZig9Mig91CIbNCM91CceGv2vSy29TzsbLDMvYEw9Uzsb0BYb0AgLZigv4y2L0Aw5NignVBw11BML0Esb3AgvYzsb3zsbZAgfYzsbHBMqGBgvHCM4GDg9NzxrOzxiU','EMTgC3i','qMvYq2e','C3rVCa'];a65_0x5257=function(){return _0x582ff9;};return a65_0x5257();}const cron=require(a65_0x504d41(0x1cd)),s=require(a65_0x504d41(0x1b9)),{cronExists,addCron:addCronInDB,deleteCron,getCronsByBot}=require('../../bdd/cron');class GroupCronManager{static #crons=[];static[a65_0x504d41(0x1ab)](_0x1907af,_0x174d4d,_0x7ed93b,_0x1d831d){const _0x782c6b=a65_0x504d41,_0x3cb6ea={'BerCa':function(_0xb72af0,_0x20aef7){return _0xb72af0===_0x20aef7;},'KKxQX':_0x782c6b(0x1c4),'YtVrn':'UnAutorised','qxZfM':_0x782c6b(0x1c6),'iLsit':_0x782c6b(0x1a1),'DqDcm':function(_0x2bc7db,_0x5b4e9f){return _0x2bc7db===_0x5b4e9f;},'YaqFS':_0x782c6b(0x1d9)};let [_0x389e91,_0x5de2f7]=_0x1907af[_0x782c6b(0x1b5)](':')['map'](_0x4a1ee7=>_0x4a1ee7[_0x782c6b(0x1be)]());if(_0x389e91[_0x782c6b(0x1d0)]('0'))_0x389e91=_0x389e91['replace']('0','');switch(_0x7ed93b){case _0x782c6b(0x1c8):const _0x112261=cron[_0x782c6b(0x1cb)](_0x5de2f7+'\x20'+_0x389e91+_0x782c6b(0x1bc),async()=>{const _0x50876a=_0x782c6b;try{if(_0x3cb6ea[_0x50876a(0x1a3)](_0x50876a(0x1aa),'falKF'))await _0x1d831d['groupSettingUpdate'](_0x174d4d,_0x50876a(0x1b2)),await _0x1d831d[_0x50876a(0x1b8)](_0x174d4d,{'text':_0x3cb6ea[_0x50876a(0x1ac)]});else{const _0x2bb684=_0x20df7b?function(){const _0x3609fb=_0x50876a;if(_0x5f03ef){const _0x29f1de=_0x19693b[_0x3609fb(0x1a8)](_0xc761ae,arguments);return _0x3f1c29=null,_0x29f1de;}}:function(){};return _0x3391ab=![],_0x2bb684;}}catch(_0x156c91){if('Eulhd'==='Eulhd')console[_0x50876a(0x1d5)]('[AUTOMUTE-ERROR]\x20:',_0x156c91);else{if(_0x1bb69c){const _0x4c955f=_0x467eb1['apply'](_0x1015ed,arguments);return _0x414603=null,_0x4c955f;}}}},{'timezone':s[_0x782c6b(0x1b3)]});GroupCronManager.#crons[_0x782c6b(0x1b4)]({'id':_0x1907af,'groupId':_0x174d4d,'action':_0x7ed93b,'botId':_0x1d831d['botId'],'cronTask':_0x112261});break;case _0x782c6b(0x1d1):const _0x22cf4e=cron[_0x782c6b(0x1cb)](_0x5de2f7+'\x20'+_0x389e91+'\x20*\x20*\x20*',async()=>{const _0x17fc0b=_0x782c6b;try{await _0x1d831d[_0x17fc0b(0x1cf)](_0x174d4d,'not_announcement'),await _0x1d831d[_0x17fc0b(0x1b8)](_0x174d4d,{'text':_0x3cb6ea['iLsit']});}catch(_0x26a688){if(_0x3cb6ea['DqDcm'](_0x17fc0b(0x1a2),'zkFsr'))console['log'](_0x3cb6ea['YaqFS'],_0x26a688);else{const _0x54f522=_0x2d1e52['getCron'](_0x374a02,_0x40229d,_0x36fe51);if(!_0x54f522)throw{'type':_0x3cb6ea[_0x17fc0b(0x1d4)],'reason':_0x3cb6ea[_0x17fc0b(0x1af)]};_0x54f522['cronTask']['stop'](),_0x22923b(_0x46d6dc,_0x3c89bb,_0x8e1313);}}},{'timezone':s[_0x782c6b(0x1b3)]});GroupCronManager.#crons[_0x782c6b(0x1b4)]({'id':_0x1907af,'groupId':_0x174d4d,'action':_0x7ed93b,'botId':_0x1d831d[_0x782c6b(0x1b1)],'cronTask':_0x22cf4e});break;}}static['getCron'](_0x2231dc,_0x572ed0,_0x42e63d){const _0x1cc7ad=a65_0x504d41;return GroupCronManager.#crons[_0x1cc7ad(0x1da)](_0xfd75e0=>_0xfd75e0['id']===_0x2231dc&&_0xfd75e0[_0x1cc7ad(0x1bf)]===_0x572ed0&&_0xfd75e0['botId']===_0x42e63d);}static['addCron'](_0x833081,_0x31345c,_0x99cc8f,_0x2457fe,_0x119560){const _0x17f61b=a65_0x504d41,_0x55b8f4={'EPEby':_0x17f61b(0x1a5),'WNovn':function(_0x5ef386,_0x1f1f53,_0x44a012,_0x2f656c,_0x2ee1a7){return _0x5ef386(_0x1f1f53,_0x44a012,_0x2f656c,_0x2ee1a7);}},_0x22b0d4=cronExists(_0x833081,_0x31345c,_0x2457fe);if(_0x22b0d4)throw{'type':_0x55b8f4[_0x17f61b(0x1ae)],'reason':'A\x20cron\x20has\x20already\x20been\x20activated\x20for\x20this\x20time'};GroupCronManager[_0x17f61b(0x1ab)](_0x833081,_0x31345c,_0x99cc8f,_0x119560),_0x55b8f4[_0x17f61b(0x1bd)](addCronInDB,_0x833081,_0x31345c,_0x2457fe,_0x99cc8f);}static[a65_0x504d41(0x1d8)](_0x2bae05,_0x25886d,_0x339d61){const _0x3ba830=a65_0x504d41,_0x12715b={'AoUJC':_0x3ba830(0x1a5),'qziiV':function(_0x488157,_0xd2fc57,_0x4ac4b9,_0x44c9d7){return _0x488157(_0xd2fc57,_0x4ac4b9,_0x44c9d7);}},_0x1d00f3=GroupCronManager['getCron'](_0x2bae05,_0x25886d,_0x339d61);if(!_0x1d00f3)throw{'type':_0x12715b[_0x3ba830(0x1ca)],'reason':_0x3ba830(0x1c6)};_0x1d00f3['cronTask'][_0x3ba830(0x1a4)](),_0x12715b[_0x3ba830(0x1c9)](deleteCron,_0x2bae05,_0x25886d,_0x339d61);}static[a65_0x504d41(0x1b7)](_0x1ebb83){const _0x3e2cf3=a65_0x504d41,_0xc5975f={'CZTNQ':function(_0x5e12c7,_0xf6864b){return _0x5e12c7(_0xf6864b);},'YwBad':function(_0x2614a5,_0x3849a6){return _0x2614a5===_0x3849a6;}},_0x278c8f=_0xc5975f[_0x3e2cf3(0x1a9)](getCronsByBot,_0x1ebb83['botId']);if(_0xc5975f['YwBad'](_0x278c8f['length'],0x0))return;console[_0x3e2cf3(0x1d5)]('Initialisation\x20des\x20crons\x20pour\x20le\x20bot\x20:\x20',_0x1ebb83['botId']),_0x278c8f[_0x3e2cf3(0x1a0)](_0x2affa2=>{const _0x1c60c5=_0x3e2cf3;GroupCronManager[_0x1c60c5(0x1ab)](_0x2affa2['id'],_0x2affa2['group_id'],_0x2affa2['action'],_0x1ebb83);});}static[a65_0x504d41(0x1c2)](_0x191d08){const _0x77a578=a65_0x504d41;if(typeof _0x191d08!=='string')return null;const _0x2c4119=_0x191d08[_0x77a578(0x1be)]()['match'](/^(0?([0-9])|1[0-9]|2[0-3]):([0-5][0-9])$/);if(!_0x2c4119)return null;return{'hr':_0x2c4119[0x1]['startsWith']('0')?_0x2c4119[0x1][_0x77a578(0x1d2)](0x1):_0x2c4119[0x1],'min':_0x2c4119[0x3]};}}module[a65_0x504d41(0x1d7)]=GroupCronManager;